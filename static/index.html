<!DOCTYPE html>
<html>

<head>
    <title>Link Aggregator</title>

    <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <meta name="author" content="Connor Murray" />
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>
    <p> What do you want to learn about? <span id='smallText'>(software engineering)</span> </p>
    <form id="query" autocomplete="off" onsubmit="event.preventDefault(); return submit_json();">
        <input name="q" type="text" autocomplete="off">
    </form>
</body>
<script>
    function submit_json() {
        if (document.contains(document.getElementById("result-table"))) {
            document.getElementById("result-table").remove();
        }
        document.body.appendChild(buildHtmlTable([{
            "name": "abc",
            "age": 50
        }, {
            "age": "25",
            "hobby": "swimming"
        }, {
            "name": "xyz",
            "hobby": "programming"
        }]));
        return false;
    }
</script>
<style>
    body {
        background-color: #404040;
    }

    p {
        color: white;
        font-family: 'Great Vibes', cursive;
        font-size: 300%;
    }

    input {
        background-color: #404040;
        border-top: none;
        border-left: none;
        border-right: none;
        color: white;
        outline: none;
    }

    th,
    td {
        border: 1px solid;
    }

    th {
        font-weight: bold
    }
</style>
<!-- This code is from this stack overflow post, it will be refactored for this specific use case in the future
       http://stackoverflow.com/questions/5180382/convert-json-data-to-a-html-table and the fiddle: http://jsfiddle.net/7MRx6/338/ -->
<script>
    var _table_ = document.createElement('table');
    var _tr_ = document.createElement('tr');
    var _th_ = document.createElement('th');
    var _td_ = document.createElement('td');

    function buildHtmlTable(arr) {
        var table = _table_.cloneNode(false);
        table.setAttribute("id", "result-table");
        var columns = addAllColumnHeaders(arr, table);
        for (var i = 0, maxi = arr.length; i < maxi; ++i) {
            var tr = _tr_.cloneNode(false);
            for (var j = 0, maxj = columns.length; j < maxj; ++j) {
                var td = _td_.cloneNode(false);
                cellValue = arr[i][columns[j]];
                td.appendChild(document.createTextNode(arr[i][columns[j]] || ''));
                tr.appendChild(td);
            }
            table.appendChild(tr);
        }
        return table;
    }

    function addAllColumnHeaders(arr, table) {
        var columnSet = []
        var tr = _tr_.cloneNode(false);
        for (var i = 0, l = arr.length; i < l; i++) {
            for (var key in arr[i]) {
                if (arr[i].hasOwnProperty(key) && columnSet.indexOf(key) === -1) {
                    columnSet.push(key);
                    var th = _th_.cloneNode(false);
                    th.appendChild(document.createTextNode(key));
                    tr.appendChild(th);
                }
            }
        }
        table.appendChild(tr);
        return columnSet;
    }
</script>

</html>
